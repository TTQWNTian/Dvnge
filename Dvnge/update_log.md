# Dvnge 更新日志

## v1.4.0
### 新增功能
- **调查模式**：在画面上设置可点击区域，点击后跳转到指定位置
  - 支持多个可点击区域
  - 支持区域贴图
  - 支持自定义鼠标样式
  - 返回按钮可自定义跳转目标

- **对话框头像系统**：在对话框左右两侧显示角色头像
  - 支持左边或右边显示
  - 支持变量路径替换（如 `{用户变量.头像路径}`）

- **章节跳转增强**：支持使用标签（字符串）跳转到其他章节的指定位置

### 使用方法

#### 调查模式
在章节数据节点中添加 **调查** 字段：

```javascript
{
    内容: '调查一下周围的环境',
    调查: {
        返回: '调查结束',// 可选，点击返回按钮跳转到的标签或索引
        光标: 'pointer',// 鼠标样式
        区域: [
            {
                x: 200,// 区域左上角X坐标（像素）
                y: 300,// 区域左上角Y坐标（像素）
                宽度: 150,// 区域宽度
                高度: 150,// 区域高度
                贴图: 'images/物品.png',// 可选，区域上显示的图片
                目标: '找到物品'// 点击后跳转到的标签或索引
            },
            {
                x: 500,
                y: 400,
                宽度: 100,
                高度: 200,
                // 没有贴图，透明区域
                目标: 5// 数字索引
            },
            {
                x: 300,
                y: 250,
                宽度: 200,
                高度: 300,
                目标: {
                    章节: '第一章',// 跳转到其他章节
                    索引: '标签名称'// 或者数字索引
                }
            }
        ]
    }
}
```

#### 头像系统

在章节数据节点中添加 头像 字段：

```javascript
// 简单用法 - 字符串形式，位置默认左边
{
    角色: 'Tian',
    内容: 'Hello',
    头像: 'images/avatar/Tian.png'
}

// 完整用法 - 对象形式，可设置位置
{
    角色: 'Tian',
    内容: 'World',
    头像: {
        路径: 'images/avatar/Tian.png',  // 图片路径
        位置: '右'  // 可选 左 或 右
    }
}

// 隐藏头像
{
    角色: 'Tian',
    内容: 'Bye bye~',
    头像: null
}

// 支持变量替换
{
    角色: 'Tian',
    内容: '我的头像',
    头像: '{用户变量.头像路径}'
}
```

#### 章节跳转（支持标签）

```javascript
// 跳转到当前章节的标签
{
    目标: '标签名称'
}

// 跳转到其他章节的索引
{
    目标: {
        章节: '第一章',
        索引: 2
    }
}

// 跳转到其他章节的标签
{
    目标: {
        章节: '第一章',
        索引: '标签名称'
    }
}
```

相关文件修改

- game.html
- css/样式.css
- js/TTQ视觉小说引擎.js

兼容性

· 完全向后兼容，不影响现有章节数据

*ps: 新年快乐~*